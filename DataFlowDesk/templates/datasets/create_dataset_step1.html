<form id="step1-form" method="POST">
    {% csrf_token %}
    <h2>Dataset Details</h2>
    {{ form.as_p }}
    <button type="button" id="generate-columns">Define Columns</button>
    <div id="column-details-container"></div>
    <button type="submit" id="submit-form" style="display:none;">Next</button>
</form>

<script>
    document.getElementById('generate-columns').addEventListener('click', function () {
        const numColumns = document.getElementById('id_num_columns').value;
        const container = document.getElementById('column-details-container');
        container.innerHTML = ''; // Clear previous column details

        for (let i = 0; i < numColumns; i++) {
            const div = document.createElement('div');
            div.innerHTML = `
                <h3>Column ${i + 1}</h3>
                <label for="col_name_${i}">Column Name:</label>
                <input type="text" id="col_name_${i}" name="col_name_${i}" required><br>
                <label for="col_type_${i}">Data Type:</label>
                <select id="col_type_${i}" name="col_type_${i}" required>
                    <option value="int">Integer</option>
                    <option value="float">Float</option>
                    <option value="string">String</option>
                    <option value="date">Date</option>
                    <option value="time">Time</option>
                </select><br>
            `;
            container.appendChild(div);
        }
        document.getElementById('submit-form').style.display = 'block'; // Show the submit button
    });
</script>
